# Вопрос №6.03

> Как выглядит спектрограмма аудиозаписи? Как ее получить? Что такое мел-шкала? Зачем она нужна?

### Как выглядит спектрограмма аудиозаписи

**Спектрограмма** — это “частоты во времени”.

Обычно это картинка:

* ось **X** — время (секунды или номер окна),
* ось **Y** — частота (Гц),
* **цвет/яркость** — энергия/амплитуда на этой частоте в данный момент (часто в децибелах).

Интуитивно:

* **низкие частоты** (гул, основной тон голоса) — внизу,
* **высокие частоты** (шипящие, шумы) — наверху,
* речь выглядит как полосы/“гребёнка” (гармоники) + формантные области.

***

### Как её получить

Спектрограмму получают через **коротковременное преобразование Фурье** (STFT):

1. Берём сигнал $$x[n]$$ и нарезаем на короткие перекрывающиеся окна длины $$N$$ (например, 25 мс).
2. Умножаем каждое окно на оконную функцию $$w[n]$$ (например, Hann), чтобы сгладить края.
3. Для каждого окна считаем FFT/DFT и берём модуль: $$S(t,k)=|X_t[k]|$$
4. Складываем результаты по окнам в матрицу “время × частота”.
5. Часто переводим амплитуду в лог-шкалу: $$S_{db}=20\log_{10}(S+\epsilon)$$

**Параметры, которые чаще всего задают:**

* $$f_s$$ — частота дискретизации (например, 16000 Гц),
* $$N$$ (или $$n_fft$$) — размер FFT (влияет на частотное разрешение),
* $$hop$$ — шаг между окнами (влияет на временное разрешение),
* $$win_length$$ — длина окна.

Компромисс:

* больше окно → лучше по частоте, хуже по времени;
* меньше окно → лучше по времени, хуже по частоте.

***

### Что такое мел-шкала

**Мел-шкала** — это шкала частот, которая приближает то, **как человек воспринимает высоту**:

* на низких частотах мы различаем изменения лучше,
* на высоких — хуже, там восприятие более “сжатое”.

То есть мел-шкала делает частотную ось **нелинейной**: снизу плотнее, сверху разреженнее.

Обычно используют преобразование: $$m=2595\log_{10}\Big(1+\frac{f}{700}\Big)$$ и обратное: $$f=700\Big(10^{m/2595}-1\Big)$$

***

### Зачем она нужна

#### 1) Сильнее похожа на человеческий слух

Если задача связана с речью/звуком “как слышит человек”, мел-шкала даёт более полезное представление, чем линейные Гц.

#### 2) Упрощает признаки для ML

Вместо тысяч частотных бин-значений после FFT делают **mel filter bank**:

* берут спектр мощности,
* пропускают через набор треугольных фильтров, равномерно расположенных по мел-шкале,
* получают **mel-spectrogram**: матрицу “время × mel-каналы” (например, 64/80/128 каналов).

#### 3) Стандарт для ASR/Audio ML

Большая часть моделей (особенно нейросети для речи) традиционно учится на mel-spectrogram или его производных (например, MFCC), потому что это компактно и информативно.

***

### Итог по связке понятий

* **Спектрограмма (STFT)**: частоты по времени в линейных Гц.
* **Mel-spectrogram**: то же самое, но частоты “пересчитаны” через mel-фильтры, ось частот ближе к восприятию слуха.

Если хочешь, дальше объясню **MFCC** (чем они отличаются от mel-spectrogram и почему их любили в классическом ASR).
